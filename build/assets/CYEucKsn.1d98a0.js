import{c as x,j as e,B as f,l as ie,m as ne,h as k,a as m,n as le,L as I,o as ce,C as oe,p as de,q as me,r as pe,d as $}from"./CE8nbfiq.1d98a0.js";import{P as he,e as ue,f as xe,g as ge,h as je,i as fe,j as ye,k as V,l as q,m as ve,C as L,a as W,c as X,b as Ne,n as be,d as we,S as w,A as ke}from"./CasB4ifT.1d98a0.js";import{I as Se}from"./D102mbmW.1d98a0.js";import{S as B,a as H,b as U,c as Q,d as K,e as Ce,f as Y,g as Pe}from"./B7cvaJGa.1d98a0.js";import{c as _e,i as F}from"./KD1BARN2.1d98a0.js";import{u as T,a as Me}from"./Bg_-1mmp.1d98a0.js";import{z as d}from"./DXqQCM1T.1d98a0.js";import{u as Ie,I as Re}from"./-EAqeef_.1d98a0.js";import"./DJVmx3xu.1d98a0.js";/**
 * @license lucide-react v0.396.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=x("ArrowDownWideNarrow",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h10",key:"1w87gc"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h4",key:"q8tih4"}]]);/**
 * @license lucide-react v0.396.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=x("ArrowUpNarrowWide",[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]]);/**
 * @license lucide-react v0.396.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=x("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.396.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=x("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.396.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=x("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.396.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=x("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.396.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=x("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.396.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=x("SearchX",[["path",{d:"m13.5 8.5-5 5",key:"1cs55j"}],["path",{d:"m8.5 8.5 5 5",key:"a8mexj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.396.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=x("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.396.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=x("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function Oe({item:s,collection:a}){const t=new Set(s.isMulti?a.items[s.id]:a.items[s.id]?[a.items[s.id]]:null);return e.jsxs(he,{children:[e.jsx(ue,{asChild:!0,children:e.jsxs(f,{variant:"outline",size:"sm",className:"h-9 border-dashed",children:[e.jsx(ie,{className:"mr-2 h-4 w-4"}),s.label,(t==null?void 0:t.size)>0&&e.jsxs(e.Fragment,{children:[e.jsx(ne,{orientation:"vertical",className:"mx-2 h-4"}),e.jsx(k,{variant:"secondary",className:"rounded-sm px-1 font-normal lg:hidden",children:t.size}),e.jsx("div",{className:"hidden space-x-1 lg:flex",children:t.size>2?e.jsxs(k,{variant:"secondary",className:"rounded-sm px-1 font-normal",children:[t.size," selected"]}):s.options.filter(r=>t.has(r.value)).map(r=>e.jsx(k,{variant:"secondary",className:"rounded-sm px-1 font-normal",children:r.label},r.value))})]})]})}),e.jsx(xe,{className:"w-[200px] p-0",align:"start",children:e.jsxs(ge,{children:[s.options.length>10&&e.jsx(je,{placeholder:wp.i18n.__("Search")}),e.jsxs(fe,{children:[e.jsx(ye,{children:wp.i18n.__("No results found.")}),e.jsx(V,{children:s.options.map(r=>{const i=t.has(r.value);return e.jsxs(q,{onSelect:c=>{i?t.delete(r.value):(s.isMulti===!1&&t.clear(),t.add(r.value));const o=Array.from(t);a.setFilter(s.id,o)},children:[e.jsx("div",{className:m("mr-2 flex h-4 w-4 items-center justify-center rounded-sm border border-primary",i?"bg-primary text-primary-foreground":"opacity-50 [&_svg]:invisible"),children:e.jsx(Fe,{className:m("h-4 w-4")})}),r.icon&&e.jsx(r.icon,{className:"mr-2 h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:r.label})]},r.value)})}),t.size>0&&e.jsxs(e.Fragment,{children:[e.jsx(ve,{}),e.jsx(V,{children:e.jsx(q,{onSelect:()=>a.setFilter(s.id,[]),className:"justify-center text-center",children:wp.i18n.__("Clear Filter")})})]})]})]})})]})}function De(s,a){const[t,r]=React.useState(s);return React.useEffect(()=>{const i=setTimeout(()=>r(s),a);return()=>{clearTimeout(i)}},[s,a]),t}function Ge({collection:s}){var o;const[a,t]=React.useState(((o=s.search)==null?void 0:o.keyword)||""),[r,i]=React.useState(!1),c=De(a,500);return React.useEffect(()=>{r&&s.setSearch(c)},[c]),React.useEffect(()=>{var l;t(((l=s.search)==null?void 0:l.keyword)||"")},[s.search]),e.jsxs("div",{className:"relative",children:[e.jsx(Se,{value:a,className:m("h-9 w-[300px] pr-7 transition-[width]"),placeholder:wp.i18n.__("Search Title"),onChange:l=>{t(l.target.value),i(!0)}}),a.length>0&&e.jsx(Z,{className:"absolute right-3 top-1/2 -translate-y-1/2 cursor-pointer opacity-100 transition-opacity hover:opacity-70",size:14,onClick:l=>s.setSearch("")})]})}function We({label:s,collection:a}){var t,r;return e.jsxs("div",{className:"flex flex-row items-center gap-4",children:[e.jsxs(B,{value:a.sorting.order_by,onValueChange:i=>a.setSort(i,a.sorting.order),children:[e.jsx(H,{className:"h-9 w-[180px]",children:e.jsx(U,{placeholder:s})}),e.jsx(Q,{children:e.jsxs(K,{children:[e.jsx(Ce,{className:"p-2 text-sm text-muted-foreground",children:"Order By"}),a.sort.map(i=>e.jsx(Y,{value:i.value,children:i.label},i.value))]})})]}),e.jsxs(f,{variant:"outline",size:"icon",onClick:()=>a.setSort(a.sorting.order_by,a.sorting.order==="asc"?"desc":"asc"),className:"h-9",children:[e.jsx(Ee,{className:m("h-[1.2rem] w-[1.2rem] scale-0 transition-all",((t=a.sorting)==null?void 0:t.order)==="asc"&&"scale-100")}),e.jsx(ze,{className:m("absolute h-[1.2rem] w-[1.2rem] scale-0 transition-all",((r=a.sorting)==null?void 0:r.order)!=="asc"&&"scale-100")})]})]})}function Xe({collection:s}){return e.jsxs(B,{value:s.pagination.per_page,onValueChange:s.setPerPage,children:[e.jsx(H,{className:"h-9 w-16",children:e.jsx(U,{placeholder:30})}),e.jsx(Q,{children:e.jsxs(K,{children:[e.jsx(Pe,{className:"p-2 text-sm text-muted-foreground",children:"Per Page"}),[30,60,90].map(a=>e.jsx(Y,{value:String(a),children:a},a))]})})]})}function Be({collection:s}){return e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-row items-start justify-between gap-4",children:[e.jsx(Ge,{collection:s}),e.jsxs("div",{className:"flex flex-row items-center gap-4",children:[e.jsx(Xe,{collection:s}),e.jsx(We,{label:"Order By",collection:s})]})]}),e.jsxs("div",{className:"flex flex-row flex-wrap items-center gap-4",children:[s.options&&e.jsx("div",{className:"flex flex-row items-center gap-4",children:s.options.map(a=>a.enabled!==!1&&e.jsx(Oe,{item:a,collection:s},a.id))}),Object.keys(s.items).length>0&&e.jsx("div",{children:e.jsxs(f,{variant:"ghost",className:"flex flex-row gap-4",onClick:s.clearFilter,children:["Clear Filters ",e.jsx(Z,{size:"14"})]})})]})]})}const He=s=>{const a={};return s.forEach(t=>{t.enabled!==!1&&(a[t.id]=t.isMulti===!0?d.array(d.string()).optional():d.string().optional())}),d.object(a)},Ue=s=>{if(s.length===0)throw new Error("sort_items must have at least one item.");const a=s.map(t=>t.value);return d.object({order_by:d.enum(a).default(a[0]),order:d.enum(["asc","desc"]).default("desc")})},O=d.object({per_page:d.enum(["30","60","90"]).default("30")}),D=d.object({keyword:d.string().optional()}),_=s=>Object.fromEntries(Object.entries(s).filter(([a,t])=>Array.isArray(t)&&t.length>0).map(([a,t])=>[a,t.sort().join(",")]));function Qe({options:s,path:a,sort:t}){const[r,i]=le(),c=React.useMemo(()=>He(s),[s]),o=React.useMemo(()=>Ue(t),[t]),l=T(a),p=Me(),u=React.useCallback(h=>{const g={};return Array.from(h.entries()).forEach(([j,N])=>{const b=s.find(E=>E.id===j);b&&(g[j]=b.isMulti?N.split(",").filter(E=>E.length>0):N)}),g},[s]),n=React.useMemo(()=>{const h=u(r),g=c.safeParse(h),j=o.safeParse(Object.fromEntries(r)),N=D.safeParse(Object.fromEntries(r)),b=O.safeParse(Object.fromEntries(r));return{items:g.success?g.data:{},sorting:j.success?j.data:{},search:N.success?N.data:{},pagination:b.success?b.data:{}}},[r,c,o,D,O]);function z(h,g){const j={...n.items,[h]:g.sort()};v(),i({...n.search,..._(j),...n.sorting,...n.pagination})}function S(h,g){const j={order_by:h??null,order:g??"asc"};i({...n.search,..._(n.items),...j,...n.pagination})}function C(h){v(),i({...h.length>0?{keyword:h}:{},..._(n.items),...n.sorting,...n.pagination})}function P(h){v(),i({...n.search,..._(n.items),...n.sorting,per_page:String(h)})}function y(){v(),i({...n.sorting,...n.pagination})}function v(){p(a,{params:{type:l.type}})}return{options:s,searchParams:r,sort:t,search:n.search,items:n.items,sorting:n.sorting,pagination:n.pagination,setFilter:z,setSort:S,resetPage:v,setSearch:C,setPerPage:P,clearFilter:y}}const J=({className:s,...a})=>e.jsx("nav",{role:"navigation","aria-label":"pagination",className:m("mx-auto flex w-full justify-center",s),...a});J.displayName="Pagination";const ee=React.forwardRef(({className:s,...a},t)=>e.jsx("ul",{ref:t,className:m("flex flex-row items-center gap-1",s),...a}));ee.displayName="PaginationContent";const M=React.forwardRef(({className:s,...a},t)=>e.jsx("li",{ref:t,className:m("",s),...a}));M.displayName="PaginationItem";const R=({className:s,isActive:a,size:t="icon",to:r,...i})=>e.jsx(I,{to:r,"aria-current":a?"page":void 0,className:m(ce({variant:a?"outline":"ghost",size:t}),s),...i});R.displayName="PaginationLink";const se=({className:s,...a})=>e.jsxs(R,{"aria-label":"Go to previous page",size:"default",className:m("gap-1 pl-2.5",s),...a,children:[e.jsx(oe,{className:"h-4 w-4"}),e.jsx("span",{children:wp.i18n.__("Previous","festingervault")})]});se.displayName="PaginationPrevious";const ae=({className:s,...a})=>e.jsxs(R,{"aria-label":"Go to next page",size:"default",className:m("gap-1 pr-2.5",s),...a,children:[e.jsx("span",{children:wp.i18n.__("Next","festingervault")}),e.jsx(de,{className:"h-4 w-4"})]});ae.displayName="PaginationNext";const te=({className:s,...a})=>e.jsxs("span",{"aria-hidden":!0,className:m("flex h-9 w-9 items-center justify-center",s),...a,children:[e.jsx(me,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"More pages"})]});te.displayName="PaginationEllipsis";function Ke(s,a,t=1){let r=[],i=Math.max(1,s-t),c=Math.min(s+t,a);const o=(l,p=!1,u=!1)=>{u?r.unshift({page:l,separator:p,active:s===l}):r.push({page:l,separator:p,active:s===l})};s-1<=t&&(c=Math.min(a,1+t*2)),a-s<=t&&(i=Math.max(1,a-t*2));for(let l=i;l<=c;l+=1)o(l);return i!==1&&(o("...",!0,!0),o(1,!1,!0)),c!==a&&(o("...",!0),o(a)),r}function Ye({totalPages:s=1,currentPage:a=1,urlGenerator:t,className:r=""}){if(s<2)return null;const i=React.useMemo(()=>Ke(a,s),[a,s]);return e.jsx(e.Fragment,{children:e.jsx(J,{className:r,children:e.jsxs(ee,{children:[a>=1&&e.jsx(M,{children:e.jsx(se,{to:t(a-1)})}),i.map((c,o)=>e.jsx(M,{children:c.separator===!1?e.jsx(R,{to:t(c.page),isActive:c.active,children:c.page}):e.jsx(te,{})},o)),a<s&&e.jsx(M,{children:e.jsx(ae,{to:t(a+1)})})]})})})}function Ze(){return e.jsxs(L,{children:[e.jsx(W,{className:"aspect-video overflow-hidden rounded-t-sm p-0 sm:p-0",children:e.jsx(w,{className:"aspect-video rounded-none rounded-t-sm"})}),e.jsxs(X,{className:"mt-4 space-y-2 pb-0",children:[e.jsx(w,{className:"h-4 w-full"}),e.jsx(w,{className:"h-4 w-3/4"}),e.jsx(w,{className:"h-4 w-full"}),e.jsx(w,{className:"h-4 w-3/4"})]})]})}function Je({item:s}){const a=pe();return Ie(s),e.jsxs(L,{className:"group/item flex flex-col justify-between transition-all duration-300",children:[e.jsxs("div",{children:[e.jsxs(W,{className:"group/image relative aspect-video overflow-hidden rounded-t-sm bg-slate-400 p-0 sm:p-0",children:[s.image&&e.jsx(I,{to:`/item/${s.type}/detail/${s.id}`,children:e.jsx("img",{src:s.image,className:"aspect-video rounded-t-sm object-cover"})}),s.version&&e.jsx(k,{className:m(["absolute bottom-1 flex items-center gap-1 rounded-sm uppercase transition-opacity group-hover/image:opacity-80","left-1"]),variant:"background",title:"Version",children:s.version}),s.access&&e.jsx(k,{className:m(["absolute bottom-1 flex items-center gap-1 rounded-sm uppercase transition-opacity","right-1 border-0"]),variant:s.access,children:s.access})]}),e.jsxs(X,{className:"space-y-1",children:[e.jsx(Ne,{className:"leading-normal",children:e.jsx(I,{to:`/item/${s.type}/detail/${s.id}`,children:wp.htmlEntities.decodeEntities(s.title)})}),e.jsxs(be,{className:"line-clamp-2",children:["In ",s.category]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-400",children:[e.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[e.jsx(Ae,{width:11})," ",moment.unix(s.updated).fromNow()]}),e.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[e.jsx($e,{width:11})," ",s.version]})]})]})]}),e.jsx(we,{children:e.jsxs("div",{className:"flex flex-row gap-2 pt-3 items-center",children:[e.jsx(Re,{item:s}),e.jsx(f,{variant:"outline",size:"icon",className:"flex items-center gap-2",onClick:t=>{a(`/item/${s.type}/detail/${s.id}`)},children:e.jsx(Te,{width:16})}),e.jsx(f,{variant:"outline",size:"icon",className:"flex items-center gap-2",onClick:t=>{},children:e.jsx(qe,{width:16})}),e.jsx(f,{variant:"outline",size:"icon",className:"flex items-center gap-2",onClick:t=>{},children:e.jsx(Le,{width:16})})]})})]})}const es=d.enum(["wordpress-themes","wordpress-plugins","elementor-template-kits"]);d.enum(["gold","bronze","silver"]);function G(s){return s.map(a=>({label:_e(a),value:a}))}const ss=[{label:"Updated",value:"updated"},{label:"Title",value:"title"},{label:"Popularity",value:"popularity"}],A="/item/:type/:page?",re=d.object({type:es.default("wordpress-themes"),page:d.coerce.number().default(1)});function as(){const s=re.parse(T(A));return e.jsx(L,{className:"col-span-1  md:col-span-3",children:e.jsxs("div",{className:"flex flex-col items-center gap-4 px-4 py-10 sm:px-6",children:[e.jsx("div",{children:e.jsx(Ve,{size:48})}),e.jsx("div",{className:"text-center text-sm italic text-muted-foreground",children:"We couldn't find the item you're looking for, you can make a wish request"}),e.jsx(f,{asChild:!0,variant:"outline",children:e.jsx(I,{to:`/requests?type=${s.type}`,children:"Add Request"})})]})})}function ps(){var S,C,P;const s=re.parse(T(A)),a=F[s.type],t=F[s.type].slug,r=s.page||1,{data:i,isLoading:c,isFetching:o}=$("item/categories",{type:t}),l=React.useMemo(()=>[{id:"level",label:wp.i18n.__("Access"),isMulti:!0,options:[{label:"Bronze",value:"bronze"},{label:"Silver",value:"silver"},{label:"Gold",value:"gold"}]},{id:"add_content",label:"Additional Content",isMulti:!1,enabled:s.type!="elementor-template-kits",options:[{label:"Yes",value:"yes"},{label:"No",value:"no"}]},{id:"category",label:"Category",enabled:s.type!="elementor-template-kits",isMulti:!0,options:i?G(i):[]}],[i,c,G,s]),p=Qe({options:l,path:A,sort:ss}),{data:u,isLoading:n,isFetching:z}=$("item/list",{type:t,page:r,filter:p.items,sort:p.sorting,keyword:(S=p.search)==null?void 0:S.keyword,per_page:Number((C=p.pagination)==null?void 0:C.per_page)});return React.useEffect(()=>{window.scrollTo({top:0,behavior:"smooth"})},[u]),e.jsx(ke,{title:a.label,description:a.description,isFetching:z,isLoading:n,preloader:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3",children:e.jsx(Ze,{})}),breadcrump:[{label:F[s.type].label,href:`/item/${t}`},{label:wp.i18n.sprintf(wp.i18n.__("Page %d"),s.page.toLocaleString())}],children:u&&e.jsxs(e.Fragment,{children:[e.jsx(Be,{collection:p}),e.jsx("div",{className:m(["grid grid-cols-1 gap-5 md:grid-cols-3 lg:gap-7"]),children:u.data.length>0?u.data.map(y=>e.jsx(Je,{item:y},y.id)):e.jsx(as,{})}),u.meta&&e.jsx(Ye,{currentPage:r,totalPages:(P=u.meta)==null?void 0:P.last_page,urlGenerator:y=>`/item/${s.type}/${y}?${p==null?void 0:p.searchParams}`})]})})}export{ps as default};
