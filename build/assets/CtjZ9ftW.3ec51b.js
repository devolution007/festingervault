import{c as y,j as e,B as N,a as m,m as X,n as U,h as M,o as B,L,p as H,C as Q,q as K,r as Y,d as I}from"./ChQuhNz2.3ec51b.js";import{A as J}from"./MDlO7Wm2.3ec51b.js";import{S as Z,a as ee,b as se,c as ae,d as te,e as re,P as ne,f as ie,g as oe,C as le,h as ce,i as de,j as me,k as z,l as A,m as he}from"./67hZtUn1.3ec51b.js";import{I as ue}from"./BOAG0qX_.3ec51b.js";import{C as pe}from"./BFV4CDd5.3ec51b.js";import{c as xe,i as _,P as je,a as ge}from"./CmZ6X1gP.3ec51b.js";import{u as R,a as fe}from"./B4n19dIN.3ec51b.js";import{z as d}from"./DXqQCM1T.3ec51b.js";import"./BUcbSi7v.3ec51b.js";import"./CziVnfbL.3ec51b.js";/**
 * @license lucide-react v0.396.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=y("ArrowDownWideNarrow",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h10",key:"1w87gc"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h4",key:"q8tih4"}]]);/**
 * @license lucide-react v0.396.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=y("ArrowUpNarrowWide",[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]]);/**
 * @license lucide-react v0.396.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=y("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.396.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=y("SearchX",[["path",{d:"m13.5 8.5-5 5",key:"1cs55j"}],["path",{d:"m8.5 8.5 5 5",key:"a8mexj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.396.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=y("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function Ne({items:s,label:a,filter:t}){var r,n;return e.jsxs("div",{className:"flex flex-row items-center gap-4",children:[e.jsx("div",{className:"text-xs",children:"Order By"}),e.jsxs(Z,{value:t.sorting.order_by,onValueChange:i=>t.setSort(i,t.sorting.order),children:[e.jsx(ee,{className:"h-9 w-[180px]",children:e.jsx(se,{placeholder:a})}),e.jsx(ae,{children:e.jsx(te,{children:s.map(i=>e.jsx(re,{value:i.value,children:i.label},i.value))})})]}),e.jsxs(N,{variant:"outline",size:"icon",onClick:()=>t.setSort(t.sorting.order_by,t.sorting.order==="asc"?"desc":"asc"),className:"h-9",children:[e.jsx(ve,{className:m("h-[1.2rem] w-[1.2rem] scale-0 transition-all",((r=t.sorting)==null?void 0:r.order)==="asc"&&"scale-100")}),e.jsx(ye,{className:m("absolute h-[1.2rem] w-[1.2rem] scale-0 transition-all",((n=t.sorting)==null?void 0:n.order)!=="asc"&&"scale-100")})]})]})}function Se({item:s,filter:a}){const t=new Set(s.isMulti?a.items[s.id]:a.items[s.id]?[a.items[s.id]]:null);return e.jsxs(ne,{children:[e.jsx(ie,{asChild:!0,children:e.jsxs(N,{variant:"outline",size:"sm",className:"h-9 border-dashed",children:[e.jsx(X,{className:"mr-2 h-4 w-4"}),s.label,(t==null?void 0:t.size)>0&&e.jsxs(e.Fragment,{children:[e.jsx(U,{orientation:"vertical",className:"mx-2 h-4"}),e.jsx(M,{variant:"secondary",className:"rounded-sm px-1 font-normal lg:hidden",children:t.size}),e.jsx("div",{className:"hidden space-x-1 lg:flex",children:t.size>2?e.jsxs(M,{variant:"secondary",className:"rounded-sm px-1 font-normal",children:[t.size," selected"]}):s.options.filter(r=>t.has(r.value)).map(r=>e.jsx(M,{variant:"secondary",className:"rounded-sm px-1 font-normal",children:r.label},r.value))})]})]})}),e.jsx(oe,{className:"w-[200px] p-0",align:"start",children:e.jsxs(le,{children:[s.options.length>10&&e.jsx(ce,{placeholder:wp.i18n.__("Search")}),e.jsxs(de,{children:[e.jsx(me,{children:wp.i18n.__("No results found.")}),e.jsx(z,{children:s.options.map(r=>{const n=t.has(r.value);return e.jsxs(A,{onSelect:i=>{n?t.delete(r.value):(s.isMulti===!1&&t.clear(),t.add(r.value));const l=Array.from(t);a.setFilter(s.id,l)},children:[e.jsx("div",{className:m("mr-2 flex h-4 w-4 items-center justify-center rounded-sm border border-primary",n?"bg-primary text-primary-foreground":"opacity-50 [&_svg]:invisible"),children:e.jsx(we,{className:m("h-4 w-4")})}),r.icon&&e.jsx(r.icon,{className:"mr-2 h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:r.label})]},r.value)})}),t.size>0&&e.jsxs(e.Fragment,{children:[e.jsx(he,{}),e.jsx(z,{children:e.jsx(A,{onSelect:()=>a.setFilter(s.id,[]),className:"justify-center text-center",children:wp.i18n.__("Clear Filter")})})]})]})]})})]})}function ke(s,a){const[t,r]=React.useState(s);return React.useEffect(()=>{const n=setTimeout(()=>r(s),a);return()=>{clearTimeout(n)}},[s,a]),t}function Ce({filter:s}){var n;const[a,t]=React.useState(((n=s.search)==null?void 0:n.keyword)||""),r=ke(a,500);return React.useEffect(()=>{s.setSearch(r)},[r]),React.useEffect(()=>{var i;t(((i=s.search)==null?void 0:i.keyword)||"")},[s.search]),e.jsxs("div",{className:"relative",children:[e.jsx(ue,{value:a,className:m("h-9 w-[300px] transition-[width] pr-7"),placeholder:wp.i18n.__("Search Title"),onChange:i=>t(i.target.value)}),a.length>0&&e.jsx(T,{className:"absolute right-3 top-1/2 -translate-y-1/2 cursor-pointer opacity-100 transition-opacity hover:opacity-70",size:14,onClick:i=>s.setSearch("")})]})}function Me({filter:s}){return e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-row items-start justify-between gap-4",children:[e.jsx(Ce,{filter:s}),e.jsx("div",{children:e.jsx(Ne,{label:"Order By",items:s.sort,filter:s})})]}),e.jsxs("div",{className:"flex flex-row flex-wrap items-center gap-4",children:[s.options&&e.jsx("div",{className:"flex flex-row items-center gap-4",children:s.options.map(a=>e.jsx(Se,{item:a,filter:s},a.id))}),Object.keys(s.items).length>0&&e.jsx("div",{children:e.jsxs(N,{variant:"ghost",className:"flex flex-row gap-4",onClick:s.clearFilter,children:["Clear Filters ",e.jsx(T,{size:"14"})]})})]})]})}const _e=s=>{const a={};return s.forEach(t=>{a[t.id]=t.isMulti===!0?d.array(d.string()).optional():d.string().optional()}),d.object(a)},Pe=s=>{if(s.length===0)throw new Error("sort_items must have at least one item.");const a=s.map(t=>t.value);return d.object({order_by:d.enum(a).default(a[0]),order:d.enum(["asc","desc"]).default("asc")})},Re=s=>Object.fromEntries(Object.entries(s).filter(([a,t])=>Array.isArray(t)&&t.length>0).map(([a,t])=>[a,t.sort().join(",")]));function Fe({options:s,path:a,sort:t}){const[r,n]=B(),i=React.useMemo(()=>_e(s),[s]),l=React.useMemo(()=>Pe(t),[t]),c=d.object({keyword:d.string().optional()}),h=R(a),p=fe(),k=React.useCallback(x=>{const j={};return s.map(u=>u.id),Array.from(x.entries()).forEach(([u,f])=>{const F=s.find(C=>C.id===u);F&&(j[u]=F.isMulti?f.split(",").filter(C=>C.length>0):f)}),j},[s]),o=React.useMemo(()=>{const x=k(r),j=i.safeParse(x),u=l.safeParse(Object.fromEntries(r)),f=c.safeParse(Object.fromEntries(r));return{items:j.success?j.data:{},sorting:u.success?u.data:{},search:f.success?f.data:{}}},[r,i,l,c]);function v(x,j){const u={...o.items,[x]:j.sort()};p(a,{params:{type:h.type}}),n({...o.search,...Re(u),...o.sorting})}function w(x,j){const u={order_by:x??null,order:j??"asc"};n({...o.search,...o.items,...u})}function g(x){n({...x.length>0?{keyword:x}:{},...o.items,...o.sorting})}function $(){n({...o.search,...o.sorting})}return{setFilter:v,setSort:w,options:s,searchParams:r,sort:t,setSearch:g,search:o.search,items:o.items,sorting:o.sorting,clearFilter:$}}const V=({className:s,...a})=>e.jsx("nav",{role:"navigation","aria-label":"pagination",className:m("mx-auto flex w-full justify-center",s),...a});V.displayName="Pagination";const q=React.forwardRef(({className:s,...a},t)=>e.jsx("ul",{ref:t,className:m("flex flex-row items-center gap-1",s),...a}));q.displayName="PaginationContent";const b=React.forwardRef(({className:s,...a},t)=>e.jsx("li",{ref:t,className:m("",s),...a}));b.displayName="PaginationItem";const S=({className:s,isActive:a,size:t="icon",to:r,...n})=>e.jsx(L,{to:r,"aria-current":a?"page":void 0,className:m(H({variant:a?"outline":"ghost",size:t}),s),...n});S.displayName="PaginationLink";const O=({className:s,...a})=>e.jsxs(S,{"aria-label":"Go to previous page",size:"default",className:m("gap-1 pl-2.5",s),...a,children:[e.jsx(Q,{className:"h-4 w-4"}),e.jsx("span",{children:wp.i18n.__("Previous","festingervault")})]});O.displayName="PaginationPrevious";const G=({className:s,...a})=>e.jsxs(S,{"aria-label":"Go to next page",size:"default",className:m("gap-1 pr-2.5",s),...a,children:[e.jsx("span",{children:wp.i18n.__("Next","festingervault")}),e.jsx(K,{className:"h-4 w-4"})]});G.displayName="PaginationNext";const W=({className:s,...a})=>e.jsxs("span",{"aria-hidden":!0,className:m("flex h-9 w-9 items-center justify-center",s),...a,children:[e.jsx(Y,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"More pages"})]});W.displayName="PaginationEllipsis";function Ie(s,a,t=1){let r=[],n=Math.max(1,s-t),i=Math.min(s+t,a);const l=(c,h=!1,p=!1)=>{p?r.unshift({page:c,separator:h,active:s===c}):r.push({page:c,separator:h,active:s===c})};s-1<=t&&(i=Math.min(a,1+t*2)),a-s<=t&&(n=Math.max(1,a-t*2));for(let c=n;c<=i;c+=1)l(c);return n!==1&&(l("...",!0,!0),l(1,!1,!0)),i!==a&&(l("...",!0),l(a)),r}function ze({totalPages:s=1,currentPage:a=1,urlGenerator:t,className:r=""}){if(s<2)return null;const n=React.useMemo(()=>Ie(a,s),[a,s]);return e.jsx(e.Fragment,{children:e.jsx(V,{className:r,children:e.jsxs(q,{children:[a>=1&&e.jsx(b,{children:e.jsx(O,{to:t(a-1)})}),n.map((i,l)=>e.jsx(b,{children:i.separator===!1?e.jsx(S,{to:t(i.page),isActive:i.active,children:i.page}):e.jsx(W,{})},l)),a<s&&e.jsx(b,{children:e.jsx(G,{to:t(a+1)})})]})})})}const Ae=d.enum(["wordpress-themes","wordpress-plugins","elementor-template-kits"]);d.enum(["gold","bronze","silver"]);function E(s){return s.map(a=>({label:xe(a),value:a}))}const Ee=[{label:"Updated",value:"updated"},{label:"Title",value:"title"},{label:"Popularity",value:"popularity"}],P="/item/:type/:page?",D=d.object({type:Ae.default("wordpress-themes"),page:d.coerce.number().default(1)}),Le=[{id:"level",label:wp.i18n.__("Access"),isMulti:!0,options:[{label:"Bronze",value:"bronze"},{label:"Silver",value:"silver"},{label:"Gold",value:"gold"}]},{id:"add_content",label:"Additional Content",isMulti:!1,options:[{label:"Yes",value:"yes"},{label:"No",value:"no"}]}];function Te(){const s=D.parse(R(P));return e.jsx(pe,{className:"col-span-1  md:col-span-3",children:e.jsxs("div",{className:"flex flex-col items-center gap-4 px-4 py-10 sm:px-6",children:[e.jsx("div",{children:e.jsx(be,{size:48})}),e.jsx("div",{className:"text-center text-sm italic text-muted-foreground",children:"We couldn't find the item you're looking for, you can make a wish request"}),e.jsx(N,{asChild:!0,variant:"outline",children:e.jsx(L,{to:`/requests?type=${s.type}`,children:"Add Request"})})]})})}function He(){var v,w;const s=D.parse(R(P)),a=_[s.type],t=_[s.type].slug,r=s.page||1,{data:n,isLoading:i,isFetching:l}=I("item/categories",{type:t}),c=React.useMemo(()=>[{id:"category",label:"Category",isMulti:!0,options:n?E(n):[]}],[n,i,E]),h=Fe({options:[...c,...Le],path:P,sort:Ee}),{data:p,isLoading:k,isFetching:o}=I("item/list",{type:t,page:r,filter:h.items,sort:h.sorting,keyword:(v=h.search)==null?void 0:v.keyword});return React.useEffect(()=>{window.scrollTo({top:0,behavior:"smooth"})},[p]),e.jsx(J,{title:a.label,description:a.description,isFetching:o,isLoading:k,preloader:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3",children:e.jsx(je,{})}),breadcrump:[{label:_[s.type].label,href:`/item/${t}`},{label:wp.i18n.sprintf(wp.i18n.__("Page %d"),s.page.toLocaleString())}],children:p&&e.jsxs(e.Fragment,{children:[e.jsx(Me,{filter:h}),e.jsx("div",{className:m(["grid grid-cols-1 gap-5 md:grid-cols-3 lg:gap-7"]),children:p.data.length>0?p.data.map(g=>e.jsx(ge,{item:{...g}},g.id)):e.jsx(Te,{})}),p.meta&&e.jsx(ze,{currentPage:r,totalPages:(w=p.meta)==null?void 0:w.last_page,urlGenerator:g=>`/item/${s.type}/${g}?${h==null?void 0:h.searchParams}`})]})})}export{He as default};
