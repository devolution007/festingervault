import{c as p,j as e,B as v,l as ee,m as se,d as k,a as b,r as m,n as ae,o as te,p as re,q as ie,s as le,t as ne,v as oe,w as ce,L as I,e as $}from"./DQNrhK9v.98755a.js";import{P as de,e as me,f as pe,g as ue,h as he,i as xe,j as ge,k as B,l as L,m as fe,C as A,a as D,c as G,b as je,n as ye,d as ve,S,A as be}from"./fMjZUljJ.98755a.js";import{I as we}from"./BVhbCVYW.98755a.js";import{S as X,a as U,b as H,c as Q,d as K,e as Ne,f as Y,g as Se}from"./X6QEh3JQ.98755a.js";import{i as z}from"./10Uh8IQK.98755a.js";import{u as V,a as ke}from"./a6_5r7v4.98755a.js";import{z as c}from"./DXqQCM1T.98755a.js";import{P as Ce}from"./DQNqnzNl.98755a.js";import{I as Ee}from"./CTy078m7.98755a.js";import"./CLi0xQLZ.98755a.js";/**
 * @license lucide-react v0.396.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=p("ArrowDownWideNarrow",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h10",key:"1w87gc"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h4",key:"q8tih4"}]]);/**
 * @license lucide-react v0.396.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=p("ArrowUpNarrowWide",[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]]);/**
 * @license lucide-react v0.396.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=p("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.396.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=p("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.396.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=p("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.396.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=p("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.396.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=p("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.396.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=p("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.396.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=p("SearchX",[["path",{d:"m13.5 8.5-5 5",key:"1cs55j"}],["path",{d:"m8.5 8.5 5 5",key:"a8mexj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.396.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=p("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.396.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=p("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function O({item:s,collection:a}){const r=new Set(s.isMulti?a.items[s.id]:a.items[s.id]?[a.items[s.id]]:null);return e.jsxs(de,{children:[e.jsx(me,{asChild:!0,children:e.jsxs(v,{variant:"outline",size:"sm",className:"h-9 border-dashed",children:[e.jsx(ee,{className:"mr-2 h-4 w-4"}),s.label,(r==null?void 0:r.size)>0&&e.jsxs(e.Fragment,{children:[e.jsx(se,{orientation:"vertical",className:"mx-2 h-4"}),e.jsx(k,{variant:"secondary",className:"rounded-sm px-1 font-normal lg:hidden",children:r.size}),e.jsx("div",{className:"hidden space-x-1 lg:flex",children:r.size>2?e.jsxs(k,{variant:"secondary",className:"rounded-sm px-1 font-normal",children:[r.size," selected"]}):s.options.filter(l=>r.has(l.value)).map(l=>e.jsx(k,{variant:"secondary",className:"rounded-sm px-1 font-normal",children:l.label},l.value))})]})]})}),e.jsx(pe,{className:"w-[200px] p-0",align:"start",children:e.jsxs(ue,{children:[s.options.length>10&&e.jsx(he,{placeholder:wp.i18n.__("Search","festingervault")}),e.jsxs(xe,{children:[e.jsx(ge,{children:wp.i18n.__("No results found.","festingervault")}),e.jsx(B,{children:s.options.map(l=>{const i=r.has(l.value);return e.jsxs(L,{onSelect:f=>{i?r.delete(l.value):(s.isMulti===!1&&r.clear(),r.add(l.value));const j=Array.from(r);a.setFilter(s.id,j)},children:[e.jsx("div",{className:b("mr-2 flex h-4 w-4 items-center justify-center rounded-sm border border-primary",i?"bg-primary text-primary-foreground":"opacity-50 [&_svg]:invisible"),children:e.jsx(Me,{className:b("h-4 w-4")})}),l.icon&&e.jsx(l.icon,{className:"mr-2 h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:l.label})]},l.value)})}),r.size>0&&e.jsxs(e.Fragment,{children:[e.jsx(fe,{}),e.jsx(B,{children:e.jsx(L,{onSelect:()=>a.setFilter(s.id,[]),className:"justify-center text-center",children:wp.i18n.__("Clear Filter","festingervault")})})]})]})]})})]})}function Be(s,a){const[r,l]=m.useState(s);return m.useEffect(()=>{const i=setTimeout(()=>l(s),a);return()=>{clearTimeout(i)}},[s,a]),r}function Le({collection:s}){var j;const[a,r]=m.useState(((j=s.search)==null?void 0:j.keyword)||""),[l,i]=m.useState(!1),f=Be(a,500);return m.useEffect(()=>{l&&s.setSearch(f)},[f]),m.useEffect(()=>{var x;r(((x=s.search)==null?void 0:x.keyword)||"")},[s.search]),e.jsxs("div",{className:"relative",children:[e.jsx(we,{value:a,className:b("h-9 w-[300px] pr-7 transition-[width]"),placeholder:wp.i18n.__("Search Title","festingervault"),onChange:x=>{r(x.target.value),i(!0)}}),a.length>0&&e.jsx(Z,{className:"absolute right-3 top-1/2 -translate-y-1/2 cursor-pointer opacity-100 transition-opacity hover:opacity-70",size:14,onClick:x=>s.setSearch("")})]})}function Oe({label:s,collection:a}){var r,l;return e.jsxs("div",{className:"flex flex-row items-center gap-4",children:[e.jsxs(X,{value:a.sorting.order_by,onValueChange:i=>a.setSort(i,a.sorting.order),children:[e.jsx(U,{className:"h-9 w-[180px]",children:e.jsx(H,{placeholder:s})}),e.jsx(Q,{children:e.jsxs(K,{children:[e.jsx(Ne,{className:"p-2 text-sm text-muted-foreground",children:"Order By"}),a.sort.map(i=>e.jsx(Y,{value:i.value,children:i.label},i.value))]})})]}),e.jsxs(v,{variant:"outline",size:"icon",onClick:()=>a.setSort(a.sorting.order_by,a.sorting.order==="asc"?"desc":"asc"),className:"h-9",children:[e.jsx(_e,{className:b("h-[1.2rem] w-[1.2rem] scale-0 transition-all",((r=a.sorting)==null?void 0:r.order)==="asc"&&"scale-100")}),e.jsx(Pe,{className:b("absolute h-[1.2rem] w-[1.2rem] scale-0 transition-all",((l=a.sorting)==null?void 0:l.order)!=="asc"&&"scale-100")})]})]})}function qe({collection:s}){return e.jsxs(X,{value:s.pagination.per_page,onValueChange:s.setPerPage,children:[e.jsx(U,{className:"h-9 w-16",children:e.jsx(H,{placeholder:30})}),e.jsx(Q,{children:e.jsxs(K,{children:[e.jsx(Se,{className:"p-2 text-sm text-muted-foreground",children:"Per Page"}),[30,60,90].map(a=>e.jsx(Y,{value:String(a),children:a},a))]})})]})}function Re({collection:s}){return e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-row items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex flex-row items-center gap-4",children:[e.jsx(Le,{collection:s}),e.jsx("div",{})]}),e.jsxs("div",{className:"flex flex-row items-center gap-4",children:[e.jsx(qe,{collection:s}),e.jsx(Oe,{label:"Order By",collection:s})]})]}),e.jsx("div",{className:"flex flex-row items-center gap-4",children:s.options&&e.jsxs("div",{className:"flex flex-row flex-wrap gap-4",children:[s.options.filter(a=>a.onBarView===!0&&a.enabled!==!1).map(a=>e.jsx(O,{item:a,collection:s},a.id)),e.jsxs(ae,{children:[e.jsx(te,{asChild:!0,children:e.jsxs(v,{variant:"outline",className:"flex flex-row gap-2",children:[wp.i18n.__("Filters","festingervault")," ",e.jsx(Te,{size:16})]})}),e.jsxs(re,{children:[e.jsxs(ie,{children:[e.jsx(le,{children:wp.i18n.__("Apply Filters","festingervault")}),e.jsx(ne,{children:wp.i18n.__("Select Filters to fine tune your search criteria","festingervault")})]}),e.jsx("div",{className:"py-4",children:s.options&&e.jsx("div",{className:"flex flex-row flex-wrap gap-4",children:s.options.filter(a=>a.enabled!==!1).map(a=>e.jsx(O,{item:a,collection:s},a.id))})})]})]}),Object.keys(s.items).length>0&&e.jsx("div",{children:e.jsxs(v,{variant:"ghost",className:"flex flex-row gap-2",onClick:s.clearFilter,children:[e.jsx("span",{children:"Clear Filters"})," ",e.jsx(Z,{size:"14"})]})})]})})]})}const We=s=>{const a={};return s.forEach(r=>{r.enabled!==!1&&(a[r.id]=r.isMulti===!0?c.array(c.string()).optional():c.string().optional())}),c.object(a)},De=s=>{if(s.length===0)throw new Error("sort_items must have at least one item.");const a=s.map(r=>r.value);return c.object({order_by:c.enum(a).default(a[0]),order:c.enum(["asc","desc"]).default("desc")})};function q(s){return Object.entries(s).reduce(function(a,[r,l]){return l.length>0&&(a[r]=l),a},{})}const R=c.object({per_page:c.enum(["30","60","90"]).default("30")}),W=c.object({keyword:c.string().optional()}),_=s=>Object.fromEntries(Object.entries(s).map(([a,r])=>[a,Array.isArray(r)?r.sort().join(","):r]));function Ge({options:s,path:a,sort:r}){const[l,i]=oe(),f=m.useMemo(()=>We(s),[s]),j=m.useMemo(()=>De(r),[r]),x=V(a),u=ke(),y=m.useCallback(d=>{const h={};return Array.from(d.entries()).forEach(([g,w])=>{const N=s.find(F=>F.id===g);N&&(h[g]=N.isMulti?w.split(",").filter(F=>F.length>0):w)}),h},[s]),n=m.useMemo(()=>{const d=y(l),h=f.safeParse(d),g=j.safeParse(Object.fromEntries(l)),w=W.safeParse(Object.fromEntries(l)),N=R.safeParse(Object.fromEntries(l));return{items:h.success?h.data:{},sorting:g.success?g.data:{},search:w.success?w.data:{},pagination:N.success?N.data:{}}},[l,f,j,W,R]);function M(d,h){const g=q({...n.items,[d]:h.length>0&&h.sort()});o(),i({...n.search,..._(g),...n.sorting,...n.pagination})}function C(d,h){const g=q({order_by:d??null,order:h??"asc"});i({...n.search,..._(n.items),...g,...n.pagination})}function E(d){o(),i({...d.length>0?{keyword:d}:{},..._(n.items),...n.sorting,...n.pagination})}function P(d){o(),i({...n.search,..._(n.items),...n.sorting,per_page:String(d)})}function t(){o(),i({...n.sorting,...n.pagination})}function o(){u(a,{params:{type:x.type}})}return{options:s,searchParams:l,sort:r,search:n.search,items:n.items,sorting:n.sorting,pagination:n.pagination,setFilter:M,setSort:C,resetPage:o,setSearch:E,setPerPage:P,clearFilter:t}}function Xe(){return e.jsxs(A,{children:[e.jsx(D,{className:"aspect-video overflow-hidden rounded-t-sm p-0 sm:p-0",children:e.jsx(S,{className:"aspect-video rounded-none rounded-t-sm"})}),e.jsxs(G,{className:"mt-4 space-y-2 pb-0",children:[e.jsx(S,{className:"h-4 w-full"}),e.jsx(S,{className:"h-4 w-3/4"}),e.jsx(S,{className:"h-4 w-full"}),e.jsx(S,{className:"h-4 w-3/4"})]})]})}function Ue({item:s}){const a=ce();return e.jsxs(A,{className:"group/item flex flex-col justify-between transition-all duration-300",children:[e.jsxs("div",{children:[e.jsxs(D,{className:"group/image relative aspect-video overflow-hidden rounded-t-sm bg-slate-400 p-0 sm:p-0",children:[s.image&&e.jsx(I,{to:`/item/${s.type}/detail/${s.id}`,children:e.jsx("img",{src:s.image,className:"aspect-video rounded-t-sm object-cover"})}),s.version&&e.jsx(k,{className:b(["absolute bottom-1 flex items-center gap-1 rounded-sm uppercase transition-opacity group-hover/image:opacity-80","left-1"]),variant:"background",title:"Version",children:s.version}),s.access&&e.jsx(k,{className:b(["absolute bottom-1 flex items-center gap-1 rounded-sm uppercase transition-opacity","right-1 border-0"]),variant:s.access,children:s.access})]}),e.jsxs(G,{className:"space-y-1",children:[e.jsx(je,{className:"leading-normal",children:e.jsx(I,{to:`/item/${s.type}/detail/${s.id}`,children:wp.htmlEntities.decodeEntities(s.title)})}),e.jsxs(ye,{className:"line-clamp-2",children:["In ",s.category]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-400",children:[e.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[e.jsx(Fe,{width:11})," ",moment.unix(s.updated).fromNow()]}),e.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[e.jsx(Ae,{width:11})," ",s.version]})]})]})]}),e.jsx(ve,{children:e.jsxs("div",{className:"flex flex-row gap-2 pt-3 items-center",children:[e.jsx(Ee,{item:s}),e.jsx(v,{variant:"outline",size:"icon",className:"flex items-center gap-2",onClick:r=>{a(`/item/${s.type}/detail/${s.id}`)},children:e.jsx(Ie,{width:16})}),e.jsx(v,{variant:"outline",size:"icon",className:"flex items-center gap-2",onClick:r=>{},children:e.jsx($e,{width:16})}),e.jsx(v,{variant:"outline",size:"icon",className:"flex items-center gap-2",onClick:r=>{},children:e.jsx(ze,{width:16})})]})})]})}const He=c.enum(["wordpress-themes","wordpress-plugins","elementor-template-kits"]);c.enum(["gold","bronze","silver"]);function Qe(s){return Object.entries(s).map(([a,r])=>({label:wp.htmlEntities.decodeEntities(r),value:a}))}const Ke=[{label:"Updated",value:"updated"},{label:"Title",value:"title"},{label:"Popularity",value:"popularity"}],T="/item/:type/:page?",J=c.object({type:He.default("wordpress-themes"),page:c.coerce.number().default(1)});function Ye(){const s=J.parse(V(T));return e.jsx(A,{className:"col-span-1  md:col-span-3",children:e.jsxs("div",{className:"flex flex-col items-center gap-4 px-4 py-10 sm:px-6",children:[e.jsx("div",{children:e.jsx(Ve,{size:48})}),e.jsx("div",{className:"text-center text-sm italic text-muted-foreground",children:"We couldn't find the item you're looking for, you can make a wish request"}),e.jsx(v,{asChild:!0,variant:"outline",children:e.jsx(I,{to:`/requests?type=${s.type}`,children:"Add Request"})})]})})}function os(){var C,E,P;const s=J.parse(V(T)),a=z[s.type],r=z[s.type].slug,l=s.page||1,{data:i,isLoading:f,isFetching:j}=$("item/terms",{type:r}),x=m.useMemo(()=>i?[{id:"category",label:"Category",enabled:s.type!="elementor-template-kits",onBarView:!0,isMulti:!0,options:i==null?void 0:i.filter(t=>t.taxonomy==="category").sort((t,o)=>t.slug.localeCompare(o.slug)).map(t=>({label:wp.htmlEntities.decodeEntities(t.name),value:t.slug}))},{id:"tag",label:"Tag",isMulti:!0,options:i==null?void 0:i.filter(t=>t.taxonomy==="post_tag").sort((t,o)=>t.slug.localeCompare(o.slug)).map(t=>({label:wp.htmlEntities.decodeEntities(t.name),value:t.slug}))},{id:"widget-ready",label:"Widget Ready",enabled:s.type!="elementor-template-kits",isMulti:!1,options:i==null?void 0:i.filter(t=>t.taxonomy==="widget-ready").sort((t,o)=>t.slug.localeCompare(o.slug)).map(t=>({label:wp.htmlEntities.decodeEntities(t.name),value:t.slug}))},{id:"compatible-with",label:"Compatible With",isMulti:!1,options:i==null?void 0:i.filter(t=>t.taxonomy==="compatible-with").sort((t,o)=>t.slug.localeCompare(o.slug)).map(t=>({label:wp.htmlEntities.decodeEntities(t.name),value:t.slug}))},{id:"files-included",label:"Files Included",enabled:s.type!="elementor-template-kits",isMulti:!1,options:i==null?void 0:i.filter(t=>t.taxonomy==="files-included").sort((t,o)=>t.slug.localeCompare(o.slug)).map(t=>({label:wp.htmlEntities.decodeEntities(t.name),value:t.slug}))},{id:"software-version",label:"Software Versions",isMulti:!1,options:i==null?void 0:i.filter(t=>t.taxonomy==="software-version").sort((t,o)=>t.slug.localeCompare(o.slug)).map(t=>({label:wp.htmlEntities.decodeEntities(t.name),value:t.slug}))},{id:"level",label:wp.i18n.__("Access","festingervault"),isMulti:!0,onBarView:!0,options:[{label:"Bronze",value:"bronze"},{label:"Silver",value:"silver"},{label:"Gold",value:"gold"}]},{id:"add_content",label:"Additional Content",isMulti:!1,enabled:s.type!="elementor-template-kits",options:[{label:"Yes",value:"yes"},{label:"No",value:"no"}]}]:[],[i,f,Qe,s]),u=Ge({options:x,path:T,sort:Ke}),{data:y,isLoading:n,isFetching:M}=$("item/list",{type:r,page:l,filter:u.items,sort:u.sorting,keyword:(C=u.search)==null?void 0:C.keyword,per_page:Number((E=u.pagination)==null?void 0:E.per_page)});return m.useEffect(()=>{window.scrollTo({top:0,behavior:"smooth"})},[y]),e.jsx(be,{title:a.label,description:a.description,isFetching:M,isLoading:n,preloader:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3",children:e.jsx(Xe,{})}),breadcrump:[{label:z[s.type].label,href:`/item/${r}`},{label:wp.i18n.sprintf(wp.i18n.__("Page %d","festingervault"),s.page.toLocaleString())}],children:y&&e.jsxs(e.Fragment,{children:[e.jsx(Re,{collection:u}),e.jsx("div",{className:b(["grid grid-cols-1 gap-5 md:grid-cols-3 lg:gap-7"]),children:y.data.length>0?y.data.map(t=>e.jsx(Ue,{item:t},t.id)):e.jsx(Ye,{})}),y.meta&&e.jsx(Ce,{currentPage:l,totalPages:(P=y.meta)==null?void 0:P.last_page,urlGenerator:t=>`/item/${s.type}/${t}?${u==null?void 0:u.searchParams}`})]})})}export{os as default};
