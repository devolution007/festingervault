import{c as m,j as e,B as j,l as Z,m as J,d as k,a as f,n as ee,o as se,L as F,e as T}from"./O5zK_5Ft.06d2ff.js";import{P as ae,e as te,f as re,g as ne,h as ie,i as le,j as ce,k as $,l as L,m as oe,C as R,a as q,c as G,b as de,n as me,d as pe,S as N,A as ue}from"./BkIsa6jg.06d2ff.js";import{I as he}from"./BEkh6kp0.06d2ff.js";import{S as D,a as W,b as X,c as U,d as Q,e as xe,f as H,g as ge}from"./B05JBjrH.06d2ff.js";import{i as E}from"./10Uh8IQK.06d2ff.js";import{u as A,a as fe}from"./CEzBhPyF.06d2ff.js";import{z as l}from"./DXqQCM1T.06d2ff.js";import{P as je}from"./B9d1nsgz.06d2ff.js";import{u as ye,I as ve}from"./_Y5CX791.06d2ff.js";import"./DpIGVD5h.06d2ff.js";/**
 * @license lucide-react v0.396.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=m("ArrowDownWideNarrow",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h10",key:"1w87gc"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h4",key:"q8tih4"}]]);/**
 * @license lucide-react v0.396.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=m("ArrowUpNarrowWide",[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]]);/**
 * @license lucide-react v0.396.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=m("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.396.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=m("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.396.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=m("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.396.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=m("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.396.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=m("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.396.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=m("SearchX",[["path",{d:"m13.5 8.5-5 5",key:"1cs55j"}],["path",{d:"m8.5 8.5 5 5",key:"a8mexj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.396.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=m("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.396.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=m("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function ze({item:s,collection:a}){const t=new Set(s.isMulti?a.items[s.id]:a.items[s.id]?[a.items[s.id]]:null);return e.jsxs(ae,{children:[e.jsx(te,{asChild:!0,children:e.jsxs(j,{variant:"outline",size:"sm",className:"h-9 border-dashed",children:[e.jsx(Z,{className:"mr-2 h-4 w-4"}),s.label,(t==null?void 0:t.size)>0&&e.jsxs(e.Fragment,{children:[e.jsx(J,{orientation:"vertical",className:"mx-2 h-4"}),e.jsx(k,{variant:"secondary",className:"rounded-sm px-1 font-normal lg:hidden",children:t.size}),e.jsx("div",{className:"hidden space-x-1 lg:flex",children:t.size>2?e.jsxs(k,{variant:"secondary",className:"rounded-sm px-1 font-normal",children:[t.size," selected"]}):s.options.filter(r=>t.has(r.value)).map(r=>e.jsx(k,{variant:"secondary",className:"rounded-sm px-1 font-normal",children:r.label},r.value))})]})]})}),e.jsx(re,{className:"w-[200px] p-0",align:"start",children:e.jsxs(ne,{children:[s.options.length>10&&e.jsx(ie,{placeholder:wp.i18n.__("Search")}),e.jsxs(le,{children:[e.jsx(ce,{children:wp.i18n.__("No results found.")}),e.jsx($,{children:s.options.map(r=>{const n=t.has(r.value);return e.jsxs(L,{onSelect:h=>{n?t.delete(r.value):(s.isMulti===!1&&t.clear(),t.add(r.value));const x=Array.from(t);a.setFilter(s.id,x)},children:[e.jsx("div",{className:f("mr-2 flex h-4 w-4 items-center justify-center rounded-sm border border-primary",n?"bg-primary text-primary-foreground":"opacity-50 [&_svg]:invisible"),children:e.jsx(Ne,{className:f("h-4 w-4")})}),r.icon&&e.jsx(r.icon,{className:"mr-2 h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:r.label})]},r.value)})}),t.size>0&&e.jsxs(e.Fragment,{children:[e.jsx(oe,{}),e.jsx($,{children:e.jsx(L,{onSelect:()=>a.setFilter(s.id,[]),className:"justify-center text-center",children:wp.i18n.__("Clear Filter")})})]})]})]})})]})}function Ee(s,a){const[t,r]=React.useState(s);return React.useEffect(()=>{const n=setTimeout(()=>r(s),a);return()=>{clearTimeout(n)}},[s,a]),t}function Fe({collection:s}){var x;const[a,t]=React.useState(((x=s.search)==null?void 0:x.keyword)||""),[r,n]=React.useState(!1),h=Ee(a,500);return React.useEffect(()=>{r&&s.setSearch(h)},[h]),React.useEffect(()=>{var p;t(((p=s.search)==null?void 0:p.keyword)||"")},[s.search]),e.jsxs("div",{className:"relative",children:[e.jsx(he,{value:a,className:f("h-9 w-[300px] pr-7 transition-[width]"),placeholder:wp.i18n.__("Search Title"),onChange:p=>{t(p.target.value),n(!0)}}),a.length>0&&e.jsx(K,{className:"absolute right-3 top-1/2 -translate-y-1/2 cursor-pointer opacity-100 transition-opacity hover:opacity-70",size:14,onClick:p=>s.setSearch("")})]})}function Ie({label:s,collection:a}){var t,r;return e.jsxs("div",{className:"flex flex-row items-center gap-4",children:[e.jsxs(D,{value:a.sorting.order_by,onValueChange:n=>a.setSort(n,a.sorting.order),children:[e.jsx(W,{className:"h-9 w-[180px]",children:e.jsx(X,{placeholder:s})}),e.jsx(U,{children:e.jsxs(Q,{children:[e.jsx(xe,{className:"p-2 text-sm text-muted-foreground",children:"Order By"}),a.sort.map(n=>e.jsx(H,{value:n.value,children:n.label},n.value))]})})]}),e.jsxs(j,{variant:"outline",size:"icon",onClick:()=>a.setSort(a.sorting.order_by,a.sorting.order==="asc"?"desc":"asc"),className:"h-9",children:[e.jsx(we,{className:f("h-[1.2rem] w-[1.2rem] scale-0 transition-all",((t=a.sorting)==null?void 0:t.order)==="asc"&&"scale-100")}),e.jsx(be,{className:f("absolute h-[1.2rem] w-[1.2rem] scale-0 transition-all",((r=a.sorting)==null?void 0:r.order)!=="asc"&&"scale-100")})]})]})}function Re({collection:s}){return e.jsxs(D,{value:s.pagination.per_page,onValueChange:s.setPerPage,children:[e.jsx(W,{className:"h-9 w-16",children:e.jsx(X,{placeholder:30})}),e.jsx(U,{children:e.jsxs(Q,{children:[e.jsx(ge,{className:"p-2 text-sm text-muted-foreground",children:"Per Page"}),[30,60,90].map(a=>e.jsx(H,{value:String(a),children:a},a))]})})]})}function Ae({collection:s}){return e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-row items-start justify-between gap-4",children:[e.jsx(Fe,{collection:s}),e.jsxs("div",{className:"flex flex-row items-center gap-4",children:[e.jsx(Re,{collection:s}),e.jsx(Ie,{label:"Order By",collection:s})]})]}),e.jsxs("div",{className:"flex flex-row flex-wrap items-center gap-4",children:[s.options&&e.jsx("div",{className:"flex flex-row items-center gap-4",children:s.options.map(a=>a.enabled!==!1&&e.jsx(ze,{item:a,collection:s},a.id))}),Object.keys(s.items).length>0&&e.jsx("div",{children:e.jsxs(j,{variant:"ghost",className:"flex flex-row gap-4",onClick:s.clearFilter,children:["Clear Filters ",e.jsx(K,{size:"14"})]})})]})]})}const Te=s=>{const a={};return s.forEach(t=>{t.enabled!==!1&&(a[t.id]=t.isMulti===!0?l.array(l.string()).optional():l.string().optional())}),l.object(a)},$e=s=>{if(s.length===0)throw new Error("sort_items must have at least one item.");const a=s.map(t=>t.value);return l.object({order_by:l.enum(a).default(a[0]),order:l.enum(["asc","desc"]).default("desc")})},V=l.object({per_page:l.enum(["30","60","90"]).default("30")}),O=l.object({keyword:l.string().optional()}),_=s=>Object.fromEntries(Object.entries(s).map(([a,t])=>[a,Array.isArray(t)?t.sort().join(","):t]));function Le({options:s,path:a,sort:t}){const[r,n]=ee(),h=React.useMemo(()=>Te(s),[s]),x=React.useMemo(()=>$e(t),[t]),p=A(a),o=fe(),g=React.useCallback(c=>{const u={};return Array.from(c.entries()).forEach(([d,b])=>{const w=s.find(z=>z.id===d);w&&(u[d]=w.isMulti?b.split(",").filter(z=>z.length>0):b)}),u},[s]),i=React.useMemo(()=>{const c=g(r),u=h.safeParse(c),d=x.safeParse(Object.fromEntries(r)),b=O.safeParse(Object.fromEntries(r)),w=V.safeParse(Object.fromEntries(r));return{items:u.success?u.data:{},sorting:d.success?d.data:{},search:b.success?b.data:{},pagination:w.success?w.data:{}}},[r,h,x,O,V]);function M(c,u){const d={...i.items,[c]:u.sort()};console.log(d),v(),n({...i.search,..._(d),...i.sorting,...i.pagination})}function S(c,u){const d={order_by:c??null,order:u??"asc"};n({...i.search,..._(i.items),...d,...i.pagination})}function C(c){v(),n({...c.length>0?{keyword:c}:{},..._(i.items),...i.sorting,...i.pagination})}function P(c){v(),n({...i.search,..._(i.items),...i.sorting,per_page:String(c)})}function y(){v(),n({...i.sorting,...i.pagination})}function v(){o(a,{params:{type:p.type}})}return{options:s,searchParams:r,sort:t,search:i.search,items:i.items,sorting:i.sorting,pagination:i.pagination,setFilter:M,setSort:S,resetPage:v,setSearch:C,setPerPage:P,clearFilter:y}}function Ve(){return e.jsxs(R,{children:[e.jsx(q,{className:"aspect-video overflow-hidden rounded-t-sm p-0 sm:p-0",children:e.jsx(N,{className:"aspect-video rounded-none rounded-t-sm"})}),e.jsxs(G,{className:"mt-4 space-y-2 pb-0",children:[e.jsx(N,{className:"h-4 w-full"}),e.jsx(N,{className:"h-4 w-3/4"}),e.jsx(N,{className:"h-4 w-full"}),e.jsx(N,{className:"h-4 w-3/4"})]})]})}function Oe({item:s}){const a=se();return ye(s),e.jsxs(R,{className:"group/item flex flex-col justify-between transition-all duration-300",children:[e.jsxs("div",{children:[e.jsxs(q,{className:"group/image relative aspect-video overflow-hidden rounded-t-sm bg-slate-400 p-0 sm:p-0",children:[s.image&&e.jsx(F,{to:`/item/${s.type}/detail/${s.id}`,children:e.jsx("img",{src:s.image,className:"aspect-video rounded-t-sm object-cover"})}),s.version&&e.jsx(k,{className:f(["absolute bottom-1 flex items-center gap-1 rounded-sm uppercase transition-opacity group-hover/image:opacity-80","left-1"]),variant:"background",title:"Version",children:s.version}),s.access&&e.jsx(k,{className:f(["absolute bottom-1 flex items-center gap-1 rounded-sm uppercase transition-opacity","right-1 border-0"]),variant:s.access,children:s.access})]}),e.jsxs(G,{className:"space-y-1",children:[e.jsx(de,{className:"leading-normal",children:e.jsx(F,{to:`/item/${s.type}/detail/${s.id}`,children:wp.htmlEntities.decodeEntities(s.title)})}),e.jsxs(me,{className:"line-clamp-2",children:["In ",s.category]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-400",children:[e.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[e.jsx(ke,{width:11})," ",moment.unix(s.updated).fromNow()]}),e.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[e.jsx(Pe,{width:11})," ",s.version]})]})]})]}),e.jsx(pe,{children:e.jsxs("div",{className:"flex flex-row gap-2 pt-3 items-center",children:[e.jsx(ve,{item:s}),e.jsx(j,{variant:"outline",size:"icon",className:"flex items-center gap-2",onClick:t=>{a(`/item/${s.type}/detail/${s.id}`)},children:e.jsx(Ce,{width:16})}),e.jsx(j,{variant:"outline",size:"icon",className:"flex items-center gap-2",onClick:t=>{},children:e.jsx(Me,{width:16})}),e.jsx(j,{variant:"outline",size:"icon",className:"flex items-center gap-2",onClick:t=>{},children:e.jsx(Se,{width:16})})]})})]})}const Be=l.enum(["wordpress-themes","wordpress-plugins","elementor-template-kits"]);l.enum(["gold","bronze","silver"]);function B(s){return Object.entries(s).map(([a,t])=>({label:wp.htmlEntities.decodeEntities(t),value:a}))}const qe=[{label:"Updated",value:"updated"},{label:"Title",value:"title"},{label:"Popularity",value:"popularity"}],I="/item/:type/:page?",Y=l.object({type:Be.default("wordpress-themes"),page:l.coerce.number().default(1)});function Ge(){const s=Y.parse(A(I));return e.jsx(R,{className:"col-span-1  md:col-span-3",children:e.jsxs("div",{className:"flex flex-col items-center gap-4 px-4 py-10 sm:px-6",children:[e.jsx("div",{children:e.jsx(_e,{size:48})}),e.jsx("div",{className:"text-center text-sm italic text-muted-foreground",children:"We couldn't find the item you're looking for, you can make a wish request"}),e.jsx(j,{asChild:!0,variant:"outline",children:e.jsx(F,{to:`/requests?type=${s.type}`,children:"Add Request"})})]})})}function es(){var S,C,P;const s=Y.parse(A(I)),a=E[s.type],t=E[s.type].slug,r=s.page||1,{data:n,isLoading:h,isFetching:x}=T("item/categories",{type:t}),p=React.useMemo(()=>[{id:"level",label:wp.i18n.__("Access"),isMulti:!0,options:[{label:"Bronze",value:"bronze"},{label:"Silver",value:"silver"},{label:"Gold",value:"gold"}]},{id:"add_content",label:"Additional Content",isMulti:!1,enabled:s.type!="elementor-template-kits",options:[{label:"Yes",value:"yes"},{label:"No",value:"no"}]},{id:"category",label:"Category",enabled:s.type!="elementor-template-kits",isMulti:!0,options:n?B(n):[]}],[n,h,B,s]),o=Le({options:p,path:I,sort:qe}),{data:g,isLoading:i,isFetching:M}=T("item/list",{type:t,page:r,filter:o.items,sort:o.sorting,keyword:(S=o.search)==null?void 0:S.keyword,per_page:Number((C=o.pagination)==null?void 0:C.per_page)});return React.useEffect(()=>{window.scrollTo({top:0,behavior:"smooth"})},[g]),e.jsx(ue,{title:a.label,description:a.description,isFetching:M,isLoading:i,preloader:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3",children:e.jsx(Ve,{})}),breadcrump:[{label:E[s.type].label,href:`/item/${t}`},{label:wp.i18n.sprintf(wp.i18n.__("Page %d"),s.page.toLocaleString())}],children:g&&e.jsxs(e.Fragment,{children:[e.jsx(Ae,{collection:o}),e.jsx("div",{className:f(["grid grid-cols-1 gap-5 md:grid-cols-3 lg:gap-7"]),children:g.data.length>0?g.data.map(y=>e.jsx(Oe,{item:y},y.id)):e.jsx(Ge,{})}),g.meta&&e.jsx(je,{currentPage:r,totalPages:(P=g.meta)==null?void 0:P.last_page,urlGenerator:y=>`/item/${s.type}/${y}?${o==null?void 0:o.searchParams}`})]})})}export{es as default};
